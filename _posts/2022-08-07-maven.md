---
title: "maven"
categories:
  -  Devops
tags:
  - Buildtool
---


### Goal
 * maven이 무엇인지 알아보자
 * maven의 plugin goal phase life-cycle에 대해서 알아보자

## 배경

이번에 회사에 입사하게 되었는데 회사에서 빌드툴로 maven을 사용한다하여 이에 대해 알아보고자 한다.

첫 직장이기에 더 열심히 해봐야지!!

## Maven이란?

Maven은 자바 전용 빌드 자동화 툴이다.

빌드 자동화란 무엇인가 말그대로 빌드할때 필요한 과정들을 자동화해준다.

그럼 빌드란 무엇일까?

빌드는 소스코드 컴파일, 테스트, 패키징과 같은 작업을 통해 최종적으로 실행할 수 있는 프로그램을 만드는것을 말한다.

## 필요한가?

이러한 작업의 자동화가 의미가 있을까? 

평소에 ide로 작업한다면 이작업의 의미는 크게 와닿지 않을수 있다.(사실 ide도 통합 빌드툴이긴 하다.)

하지만 이렇게 생각해보자 우리가 cli환경에서 개발해야 한다면?

우리는 보통 특정 프로젝트를 배포하는 작업을 할때 클라우드 컴퓨팅을 활용하고 이는 보통 Cli환경에 배포를 한다.

근데 여기서는 eclips나 intellij와 같은 ide를 사용할수 있을까?

불가능하다.. 그럼 우린 적절한 명령어를 통해 빌드를 해야 한다.

만약 직접 이 빌드과정을 해야된다면 어떨까?

내가 일일히 모든 파일을 다 컴파일을 해야될테고 

```code
javac Test2.java Test.java

javac Test3.java Test4.java

javac -cp ".;lib" Test5.java
```

테스트 해보기 위해 따로 명령을 시행해야 될테고

```code
java -jar junit-platform-console-standalone-<version>.jar <Options>
```

이를 Jar파일로 만들기 위해 따로 작성을 해야될것이다.

```code
jar -cvmf manifest.txt Test1.jar Test1.class Test/Test2.class
```

이를 간단한 명령어로 해결 가능한것이 maven이다.

## plugin phase goal lifecycle

Maven에서 제공하는 기능은 모두 plugin 기반으로 작동한다.

plugin : 하나 이상의 goal의 집합체다. maven에 여러 기능을 제공해준다.

예를 들어 compiler plugin은 자바 소스들을 컴파일한다.

goal : 위와 같은 plugin이 가지고있는 명령이다. plugin은 이런 명령을 여러개를 가지고 있다.

예를 들어 compiler plugin은 메인 소스 파일을 컴파일 하는 compiler:compile goal과 테스트 소스코드를 컴파일하는 complie:testComplie goal을 가진다.

phase : 사전적인 의미의 단계 말그대로 의미만 있지 실질적으로 일을 수행하는것은 plugin과 goal이다. 빌드 라이프사이클에서 빌드 단계와 각 단계의 순서만을 정의하고 있는 개념

보통 phase를 통해 goal을 실행하면 처음부터 해당 단계까지 모두 순차적으로 빌드가 실행된다.

lifecycle : maven은 기본적으로 default, clean, site와 같은 life-cycle을 제공한다.

각각의 라이프 사이클은 phase별로 해당 plugin과 goal을 순서대로 실행한다.

라이프 사이클은 여러가지 많은 phase로 이루어져 있으며. 이는 다 실행되지 않으며 phase마다 plugin:goal이 바인딩 되어있어야 해당 Phase를 실행한다.

기본적으로 Maven을 따로 설정하지 않아도 바인딩 되어있는 phase가 있다.

이는 각 사이클 별로 알아보겠다.

default : 기본 Build life cycle로 프로젝트의 배포를 처리한다.

다음은 기본적으로 바인딩 되어있는 phase다.

* process-resources : 리소스를 대상 디렉터리에 복사하고 처리하여 패키징 준비를 한다.
* compile : 프로젝트 소스코드를 컴파일 한다.
* process-test-resources : 리소스를 복사하여 테스트 대상 디렉터리에 처리한다.
* test-compile : 테스트 소스 코드를 테스트 대상 디렉터리에 컴파일한다.
* test : 적절한 단위 테스트 프레임워크를 사용하여 테스트를 실행
* package : 컴파일된 코드를 JAR과 같은 배포 가능한 형식으로 패키지
* install : 로컬에서 다른 프로젝트의 종속성으로 사용할 수 있도록 패키지를 로컬 리포지토리에 설치
* deploy :  통합 또는 릴리스 환경에서 수행되며 최종 패키지를 원격 저장소에 복사하여 다른 개발자 및 프로젝트와 공유


clean : 프로젝트를 clean할때 사용하는 라이프사이클이다.

다음은 기본적으로 바인딩 되어있는 phase다.

* clean : 이전 빌드에서 생성된 모든 파일 제거

site  :  프로젝트의 웹 사이트 생성을 처리

다음은 기본적으로 바인딩 되어있는 phase다.

* site : 프로젝트의 사이트 문서 생성
* site-deploy : 생성된 사이트 문서를 지정된 웹 서버에 배포


다음은 pom.xml 작성법과 maven repository에 대해서 알아보겠다.

참고 : 

[뉴렉 강의](https://www.youtube.com/watch?v=fQsTKKkZ6d8)

[Maven 설명 참고](https://m.blog.naver.com/PostView.naver?isHttpsRedirect=true&blogId=remagine&logNo=220726121992)

[maven 문서](https://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html#Build_Lifecycle_Basics)







